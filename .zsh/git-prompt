#!/bin/zsh

git_dir() {
  git rev-parse --is-inside-work-tree >/dev/null 2>&1
}

git_branch() {
  echo "$(git symbolic-ref --short HEAD 2>/dev/null || git rev-parse --short HEAD 2>/dev/null)"
}

git_status() {
  git status --short 2>/dev/null
}

if git_dir ; then
  if [[ -z $(git_status) ]]; then
    echo -n "%F{green}($(git_branch))%f "
  else
    echo -n "%F{yellow}($(git_branch))%f "
  fi
fi
